!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="e958d1df-c66d-4863-9ab5-c4525d68f120",e._sentryDebugIdIdentifier="sentry-dbid-e958d1df-c66d-4863-9ab5-c4525d68f120")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7439],{67439:function(e,t,s){s.d(t,{ChatTopNav:function(){return tp}});var n=s(584),a=s(97631),r=s(79972),i=s(7263),l=s(88212),o=s(50240);let c=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(l.fC,{ref:t,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full border border-border hover:opacity-75 duration-150",s),...a})});c.displayName=l.fC.displayName;let d=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(l.Ee,{ref:t,className:(0,i.cn)("aspect-square h-full w-full",s),...a})});d.displayName=l.Ee.displayName;let u=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(l.NY,{ref:t,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full",s),...a})});u.displayName=l.NY.displayName;let h=e=>{let{className:t,user:s}=e,a=(0,o.useMemo)(()=>[null==s?void 0:s.givenName,null==s?void 0:s.familyName].map(e=>null==e?void 0:e[0]).join("").substring(0,2),[s]);return(0,n.jsxs)(c,{className:t,children:[(0,n.jsx)(d,{src:null==s?void 0:s.profileImageUrl,alt:"pfp"}),(0,n.jsx)(u,{className:"bg-surface-l4 text-fg-primary shadow-sm dark:shadow-none border-border-l1",children:a})]})};var p=s(22852),x=s(879),m=s(85682),g=s(56788),f=s(61500),v=s(62339),j=s(87762),b=e=>(0,n.jsxs)(j.J,{...e,children:[(0,n.jsx)("path",{d:"M3 5L19 5",stroke:"currentColor",strokeLinecap:"square",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M3 12H7",stroke:"currentColor",strokeLinecap:"square",strokeLinejoin:"round"}),(0,n.jsx)("circle",{cx:"16",cy:"15",r:"4",stroke:"currentColor"}),(0,n.jsx)("path",{d:"M19 18L21 20",stroke:"currentColor",strokeLinecap:"square"}),(0,n.jsx)("path",{d:"M3 19H7",stroke:"currentColor",strokeLinecap:"square",strokeLinejoin:"round"})]}),y=s(89576),w=s(66070),N=s(75816),k=s(55029),C=s(74275),S=s(75075),I=s(60778);let D=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(I.mY,{ref:t,className:(0,i.cn)("flex w-full flex-col overflow-hidden rounded-xl text-popover-foreground",s),...a})});D.displayName=I.mY.displayName;let E=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsxs)("div",{className:"flex items-center border-b-2 border-input-border px-3","cmdk-input-wrapper":"",children:[(0,n.jsx)(S._Ve,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,n.jsx)(I.mY.Input,{ref:t,className:(0,i.cn)("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...a})]})});E.displayName=I.mY.Input.displayName;let _=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(I.mY.List,{ref:t,className:(0,i.cn)("overflow-y-auto overflow-x-hidden p-1",s),...a})});_.displayName=I.mY.List.displayName,o.forwardRef((e,t)=>(0,n.jsx)(I.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e})).displayName=I.mY.Empty.displayName,o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(I.mY.Group,{ref:t,className:(0,i.cn)("overflow-hidden px-2.5 py-2 text-sm text-muted-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...a})}).displayName=I.mY.Group.displayName,o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(I.mY.Separator,{ref:t,className:(0,i.cn)("-mx-1 h-px bg-border",s),...a})}).displayName=I.mY.Separator.displayName;let P=o.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(I.mY.Item,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center gap-2 px-3.5 py-3 text-sm outline-none","after:absolute after:inset-1 after:rounded-lg after:transition ease-in-out","focus:after:bg-card-hover","[&[data-selected='true']]:after:bg-card-hover",s),...a})});P.displayName=I.mY.Item.displayName;var z=s(67989);function A(e){let{locale:t,onChange:s}=e,{t:a}=(0,w.$G)();return(0,n.jsxs)(D,{children:[(0,n.jsx)(E,{placeholder:a("Search language","Search language")}),(0,n.jsx)(_,{children:x.nD.map(e=>(0,n.jsx)(M,{locale:e,selected:t===e,onSelect:s},e))})]})}function M(e){let{locale:t,selected:s,onSelect:a}=e,{name:r,nativeName:i}=x.k1[t];return(0,n.jsxs)(P,{value:t,keywords:[i,r],onSelect:()=>a(t),className:"justify-between cursor-pointer",children:[i,s?(0,n.jsx)(z.Z,{className:"size-4","data-testid":"check-icon"}):(0,n.jsx)("span",{className:"text-muted-foreground",children:r})]})}function L(e){let{open:t,onOpenChange:s,locale:a,onLocaleChange:r}=e,{t:l}=(0,w.$G)(),o=(0,y.w)(),c=(0,i.cn)("bg-background rounded-2xl outline-none h-[calc(100dvh-64px-128px)] w-full md:w-[400px] max-w-3xl flex flex-col md:h-[min(500px,90dvh)]",{"rounded-b-none":o});return(0,n.jsxs)(k.c,{open:t,setOpen:s,contentClassName:c,"aria-labelledby":"language-selector-title",children:[(0,n.jsx)(N.$N,{className:"sr-only",children:l("Language Selector","Language Selector")}),(0,n.jsx)(A,{locale:a,onChange:r})]})}var F=s(16505),O=s(90347),G=s(23214),Z=s(20811),R=s(95397),T=s(50253),B=s(24638),$=s(48454),U=s(78161),H=s(47006),W=s(69136);function Y(){var e;let{t}=(0,w.$G)("settings"),s=(0,r.kP)(),a=(0,R.g)(),{data:l}=(0,T.Pd)(),o=null===(e=s.user)||void 0===e?void 0:e.xSubscriptionType,c=a.HIDE_SUBSCRIPTION_FLOWS_FROM_PREMIUM_PLUS_USERS&&"PremiumPlus"===o||(null==l?void 0:l.hasSubscriptions);return(0,n.jsxs)("div",{className:"flex flex-col w-full h-full",children:[(0,n.jsxs)("div",{className:"px-3",children:[(0,n.jsx)("h1",{className:"font-semibold text-md",children:t("SuperGrok","SuperGrok")}),(0,n.jsx)("p",{className:(0,i.cn)("text-sm text-fg-secondary font-medium mb-4"),children:c?t("Your plan includes:","Your plan includes:"):t("Subscribe to SuperGrok to get:","Subscribe to SuperGrok to get:")}),(0,n.jsxs)("ul",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("li",{className:"flex items-center gap-2 ",children:[(0,n.jsx)(W.gwl,{className:"text-fg-secondary",height:14,width:14}),(0,n.jsx)("span",{className:"text-sm",children:t("Everything in free","Everything in free")})]}),(0,n.jsxs)("li",{className:"flex items-center gap-2 ",children:[(0,n.jsx)(W.gwl,{className:"text-fg-secondary",height:14,width:14}),(0,n.jsx)("span",{className:"text-sm",children:t("Larger model context window","Larger model context window")})]}),(0,n.jsxs)("li",{className:"flex items-center gap-2 ",children:[(0,n.jsx)(W.gwl,{className:"text-fg-secondary",height:14,width:14}),(0,n.jsx)("span",{className:"text-sm",children:t("More queries for Grok 3","More queries for Grok 3")})]}),(0,n.jsxs)("li",{className:"flex items-center gap-2 ",children:[(0,n.jsx)(W.gwl,{className:"text-fg-secondary",height:14,width:14}),(0,n.jsx)("span",{className:"text-sm",children:t("More queries for Image Generation","More queries for Image Generation")})]}),(0,n.jsxs)("li",{className:"flex items-center gap-2 ",children:[(0,n.jsx)(W.gwl,{className:"text-fg-secondary"}),(0,n.jsx)("span",{className:"text-sm",children:t("Opportunities to try new features early!","Opportunities to try new features early!")})]})]})]}),(0,n.jsx)(X,{subscriptions:null==l?void 0:l.subscriptions})]})}function X(e){let{subscriptions:t}=e,{t:s}=(0,w.$G)("settings"),a=(0,o.useMemo)(()=>null==t?[]:t.filter(e=>!e.enterprise&&"SUBSCRIPTION_STATUS_ACTIVE"===e.status),[t]),r=a[0];return null==t?null:r?1===a.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.Z,{orientation:"horizontal",className:"my-6"}),(0,n.jsx)(V,{subscription:r,labelOverride:s("Manage your subscription","Manage your subscription")})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.Z,{orientation:"horizontal",className:"my-6"}),a.map((e,t)=>(0,n.jsx)(V,{subscription:e},t))]}):(0,n.jsx)(Z.V,{className:"mt-auto"})}function V(e){let{labelOverride:t,subscription:s}=e,{t:a}=(0,w.$G)("settings"),[r,i]=(0,o.useState)(!1);if(s.stripe)return(0,n.jsxs)(p.zx,{className:"text-sm",variant:"outline",size:"pill",disabled:r,onClick:()=>{i(!0),$.Bh.subscriptionsCreateBillingPortalSession({body:{returnUrl:window.location.href}}).then(e=>{window.open(e.url,"_blank")}).catch((0,B.n4)("settings-billing:manage-subscription")).finally(()=>{i(!1)})},children:[null!=t?t:a("Manage your subscription (Stripe)","Manage your subscription (Stripe)"),r?(0,n.jsx)(U.Z,{height:16,width:16,className:"text-neutral-400 animate-spin !duration-1000"}):(0,n.jsx)(H.Z,{height:16,width:16,className:"text-neutral-400"})]});if(s.x){let e=K(s);return(0,n.jsx)(p.zx,{variant:"outline",size:"pill",className:"text-sm",children:(0,n.jsxs)("a",{href:e,target:"_blank",className:"flex items-center gap-2",children:[null!=t?t:a("Manage your subscription (X)","Manage your subscription (\uD835\uDD4F)"),(0,n.jsx)(H.Z,{height:16,width:16,className:"text-neutral-400"})]})})}if(s.apple){let e=K(s);return(0,n.jsx)(p.zx,{variant:"outline",size:"pill",className:"text-sm",children:(0,n.jsxs)("a",{href:e,target:"_blank",className:"flex items-center gap-2",children:[null!=t?t:a("Manage your subscription (Apple)","Manage your subscription (Apple)"),(0,n.jsx)(H.Z,{height:16,width:16,className:"text-neutral-400"})]})})}if(s.google){let e=K(s);return(0,n.jsx)(p.zx,{variant:"outline",size:"pill",className:"text-sm",children:(0,n.jsxs)("a",{href:e,target:"_blank",className:"flex items-center gap-2",children:[null!=t?t:a("Manage your subscription (Google)","Manage your subscription (Google)"),(0,n.jsx)(H.Z,{height:16,width:16,className:"text-neutral-400"})]})})}return null}function K(e){return e.x?"https://x.com/settings/subscription":e.apple?"https://apps.apple.com/account/subscriptions":e.google?"https://play.google.com/store/account/subscriptions?sku=grok.pro&package=ai.x.grok":void 0}var q=s(16331),J=s(38431);let Q=e=>{let{className:t,children:s}=e;return(0,n.jsx)("div",{className:(0,i.cn)("border border-border-l2 px-3 py-1 rounded-full","text-sm text-fg-secondary inline-flex flex-row items-center gap-1","mt-0.5","w-fit",t),children:s})};function ee(e){let{subscriptionType:t}=e,{t:s}=(0,w.$G)("base");return"PremiumPlus"===t?(0,n.jsx)(Q,{className:"text-[#bb992e] dark:text-[#C4A06B]",children:s("Premium+","Premium+")}):"Premium"===t?(0,n.jsx)(Q,{className:"text-[#426db1] dark:text-[#7F93B0]",children:s("Premium","Premium")}):"Free"===t||""===t?(0,n.jsx)(Q,{children:s("Basic","Basic")}):null}let et="/link-x-account-error";var es=s(57750),en=s(25693),ea=s(5632),er=s(77717),ei=s(9354);function el(e){let{children:t,className:s}=e,a=(0,i.cn)("text-sm font-medium",s);return(0,n.jsx)("div",{className:a,children:t})}function eo(e){let{children:t}=e;return(0,n.jsx)("div",{className:"text-xs text-secondary text-pretty",children:t})}function ec(e){let{children:t,action:s,hidden:a,className:r}=e,l=(0,o.useId)();if(a)return null;let c=(0,o.isValidElement)(s)?(0,o.cloneElement)(s,{"aria-labelledby":l}):s;return(0,n.jsxs)("div",{className:"flex flex-row items-center justify-between w-full gap-4 px-3",children:[(0,n.jsx)("div",{className:(0,i.cn)("max-w-sm min-w-0",r),id:l,children:t}),(0,n.jsx)("div",{className:"text-right min-w-24",children:c})]})}function ed(e){var t;let{onManage:s}=e,{t:a}=(0,w.$G)("settings"),i=(0,r.kP)(),l=null===(t=i.user)||void 0===t?void 0:t.xSubscriptionType,c=(0,R.g)(),d=(0,er.useRouter)(),{data:u}=(0,T.Pd)(),x=c.HIDE_SUBSCRIPTION_FLOWS_FROM_PREMIUM_PLUS_USERS&&"PremiumPlus"===l||(null==u?void 0:u.hasSubscriptions),m=(0,en.Db)({mutationFn:async()=>{let e=window.location.host,t="".concat(e.startsWith("localhost")?"http://":"https://").concat(e).concat("/api/link-x-account/"),s=await (0,q.t)(t,"X");d.push(s||et)},onError:e=>{(0,B.H)("settings-account",e),d.push(et)}}),g=(0,o.useMemo)(()=>{var e;return!!(null===(e=i.user)||void 0===e?void 0:e.xUserId)},[i.user]);return(0,n.jsxs)("div",{className:"flex flex-col w-full h-full gap-6",children:[i.user&&(0,n.jsx)(ec,{action:(0,n.jsx)(p.zx,{variant:"outline",rounded:!0,className:"group",onClick:s,children:a("Manage","Manage")}),children:(0,n.jsxs)("div",{className:"flex flex-row items-center w-full gap-2",children:[(0,n.jsx)(h,{className:"w-12 h-12",user:i.user}),(0,n.jsxs)("div",{className:"p-1 min-w-0 text-sm",children:[(0,n.jsx)(el,{children:"".concat(i.user.givenName," ").concat(i.user.familyName)}),(0,n.jsx)("div",{className:"text-secondary truncate",children:i.user.email})]})]})}),c.SHOW_X_BADGE&&i.user&&g&&(0,n.jsx)(ec,{action:(0,n.jsx)(ee,{subscriptionType:l}),children:(0,n.jsx)(el,{children:a("\uD835\uDD4F Status","\uD835\uDD4F Status")})}),i.user&&!g&&(0,n.jsx)(ec,{action:(0,n.jsx)(p.zx,{variant:"outline",rounded:!0,disabled:m.isPending,onClick:()=>m.mutate(),children:a("Connect","Connect")}),children:(0,n.jsx)(el,{children:a("Connect X Account","Connect your \uD835\uDD4F Account")})}),(0,n.jsx)(eu,{}),!x&&(0,n.jsx)(J.VE,{className:"mt-auto"})]})}function eu(){let{t:e,i18n:t}=(0,w.$G)("settings"),s=(0,es.F)(ei.Z("selectedLanguage")),[a,r]=(0,o.useState)(!1),i=(0,o.useMemo)(()=>s||t.languages.find(e=>e in x.l2)||x.sm,[t.languages,s]),l=(0,o.useCallback)(e=>{t.changeLanguage(e).then(()=>{es.F.getState().setSelectedLanguage(e),r(!1)}).catch(e=>(0,B.H)("settings-account",e))},[t]),c=(0,n.jsx)(p.zx,{variant:"outline",rounded:!0,onClick:()=>r(!0),children:e("Change","Change")});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ec,{action:c,children:(0,n.jsxs)(el,{className:"flex items-center gap-2",children:[e("Language","Language"),(0,n.jsx)(ea.Z,{size:16,className:"text-secondary"})]})}),(0,n.jsx)(L,{locale:i,open:a,onLocaleChange:l,onOpenChange:r})]})}var eh=s(47192),ep=s(39955);function ex(){let{t:e}=(0,w.$G)("settings"),t=(0,R.g)(),s=(0,es.F)(ei.Z("userSettings")),a=(0,es.F)(ei.Z("fetchSetPreference"));return(0,n.jsxs)("div",{className:"flex flex-col w-full h-full gap-6",children:[(0,n.jsx)(eh.oX,{}),(0,n.jsx)(ec,{action:(0,n.jsx)(ep.r,{checked:s.preferences.displayUserMessageMarkdown,onCheckedChange:e=>a("displayUserMessageMarkdown",e)}),children:(0,n.jsx)(el,{children:e("Display Your Message In Markdown","Display Your Message In Markdown")})}),(0,n.jsx)(ec,{action:(0,n.jsx)(ep.r,{checked:s.preferences.autoWrapLongLinesCode,onCheckedChange:e=>a("autoWrapLongLinesCode",e)}),children:(0,n.jsx)(el,{children:e("Wrap Long Lines For Code Blocks By Default","Wrap Long Lines For Code Blocks By Default")})}),(0,n.jsx)(ec,{action:(0,n.jsx)(ep.r,{checked:s.preferences.showConversationPreviews,onCheckedChange:e=>a("showConversationPreviews",e)}),children:(0,n.jsx)(el,{children:e("Show Conversation Previews in History","Show Conversation Previews in History")})}),(null==t?void 0:t.ENABLE_CONVERSATION_TABS)&&(0,n.jsx)(ec,{action:(0,n.jsx)(ep.r,{checked:s.preferences.showActiveTabs,onCheckedChange:e=>a("showActiveTabs",e)}),children:(0,n.jsx)(el,{children:e("Show Active Conversation Tabs","Show Active Conversation Tabs")})})]})}function em(){let{t:e}=(0,w.$G)("settings"),t=(0,R.g)(),s=(0,es.F)(ei.Z("userSettings")),a=(0,es.F)(ei.Z("fetchSetPreference"));return(0,n.jsxs)("div",{className:"flex flex-col w-full h-full gap-6",children:[(0,n.jsx)(ec,{action:(0,n.jsx)(ep.r,{checked:s.preferences.autoOpenSearchResults,onCheckedChange:e=>a("autoOpenSearchResults",e)}),children:(0,n.jsx)(el,{children:e("Automatically Open Search Results","Automatically Open Search Results")})}),(0,n.jsx)(ec,{action:(0,n.jsx)(ep.r,{checked:s.preferences.disableAutoScroll,onCheckedChange:e=>a("disableAutoScroll",e)}),children:(0,n.jsx)(el,{children:e("Disable Auto Scroll","Disable Auto Scroll")})}),(0,n.jsx)(ec,{action:(0,n.jsx)(ep.r,{checked:s.preferences.showFollowUpSuggestions,onCheckedChange:e=>a("showFollowUpSuggestions",e)}),children:(0,n.jsx)(el,{children:e("Show Follow Up Suggestions","Show Follow Up Suggestions")})}),(0,n.jsx)(ec,{action:(0,n.jsx)(ep.r,{checked:s.preferences.hideArtifacts,onCheckedChange:e=>a("hideArtifacts",e)}),children:(0,n.jsx)(el,{children:e("settings-tab.behavior.artifacts.disable","Disable Sidebar Editor For Code And Documents")})}),(null==t?void 0:t.ENABLE_BROWSER_NOTIFICATIONS)&&(0,n.jsx)(ec,{action:(0,n.jsx)(ep.r,{checked:s.preferences.browserNotificationsEnabled,onCheckedChange:e=>a("browserNotificationsEnabled",e)}),children:(0,n.jsx)(el,{children:e('Notify When "Think" Or "DeepSearch" Completes','Notify When "Think" Or "DeepSearch" Completes')})}),t.ENABLE_WEBPAGE_ATTACHMENTS&&(0,n.jsx)(ec,{action:(0,n.jsx)(ep.r,{checked:s.preferences.autoDetectWebpageAttachments,onCheckedChange:e=>a("autoDetectWebpageAttachments",e)}),children:(0,n.jsx)(el,{children:e("settings.behavior.auto-detect-webpage-attachments",{defaultValue:"Read Webpage Content of Pasted URLs"})})}),(null==t?void 0:t.ENABLE_BRAVE_COMPLETIONS)&&(0,n.jsx)(ec,{action:(0,n.jsx)(ep.r,{checked:s.preferences.disableTypeahead,onCheckedChange:e=>a("disableTypeahead",e)}),children:(0,n.jsx)(el,{children:e("settings.behavior.disable-typeahead",{defaultValue:"Disable Typeahead Suggestions"})})})]})}var eg=s(43666),ef=s(47457),ev=s(25763),ej=s(72930),eb=s(32088),ey=s(76140),ew=s(99406);function eN(e){var t,s,a,l;let{onManage:c,onDelete:d,onNavigate:u}=e,{t:h}=(0,w.$G)("settings"),x=(0,R.g)(),{client:m}=(0,eb.useStatsigClient)(),g=(0,r.kP)(),f=(0,ef.o)(),v=(0,es.F)(ei.Z("userSettings")),j=(0,es.F)(ei.Z("fetchSetUserSettings")),[b,y]=(0,o.useState)(!1),N=(0,o.useCallback)(()=>{c()},[]),k=(0,o.useCallback)(()=>{d()},[]),C=(0,o.useMemo)(()=>(0,ev.g)(g.countryCode),[g.countryCode]),{data:S}=(0,T.Pd)(),I=null==S?void 0:null===(t=S.subscriptions)||void 0===t?void 0:t.some(e=>!!e.enterprise),D=(null===(a=g.user)||void 0===a?void 0:null===(s=a.email)||void 0===s?void 0:s.endsWith("@x.ai"))||!I;return(0,n.jsxs)("div",{className:"flex flex-col w-full gap-6",children:[D&&(0,n.jsxs)(ec,{action:(0,n.jsx)(ep.r,{checked:!v.excludeFromTraining,onCheckedChange:e=>{var t,s;m.logEvent("set_exclude_from_training",String(!e),{userId:null!==(s=null===(t=g.user)||void 0===t?void 0:t.userId)&&void 0!==s?s:""}),j({...v,excludeFromTraining:!e}).catch(()=>{ew.Am.error(h("settings-data.error","Failed to update settings"))})}}),children:[(0,n.jsx)(el,{children:h("Improve the Model","Improve the Model")}),(0,n.jsx)(eo,{children:h("Improve the Model.description","By allowing your data to be used for training our models, you help enhance your own experience and improve the quality of the model for all users. We take measures to ensure your privacy is protected throughout the process.")})]}),D&&(null===(l=g.user)||void 0===l?void 0:l.xUserId)&&(0,n.jsx)(ec,{action:(0,n.jsx)(ep.r,{checked:v.allowXPersonalization,onCheckedChange:e=>{var t,s;m.logEvent("set_allow_x_personalization",String(e),{userId:null!==(s=null===(t=g.user)||void 0===t?void 0:t.userId)&&void 0!==s?s:""}),j({...v,allowXPersonalization:e}).catch(()=>{ew.Am.error(h("settings-data.error","Failed to update settings"))})}}),children:(0,n.jsxs)("div",{children:[(0,n.jsx)(el,{children:h("Personalize Grok using X","Personalize Grok using \uD835\uDD4F")}),(0,n.jsxs)(eo,{children:[h("Personalize Grok using X.description","Allow your \uD835\uDD4F data to be used for personalizing and enhancing your Grok experience. This data includes:")," ",h("Personalize Grok using X.permissions","\uD835\uDD4F user profile, \uD835\uDD4F account information and location, \uD835\uDD4F settings, \uD835\uDD4F preferences, posts viewable on your \uD835\uDD4F account.")]})]})}),x.ENABLE_MEMORY_TOGGLE&&D&&g.user&&(0,n.jsx)(ec,{action:(0,n.jsx)(ep.r,{checked:v.enableMemory,onCheckedChange:e=>{var t,s;m.logEvent("set_enable_memory",String(e),{userId:null!==(s=null===(t=g.user)||void 0===t?void 0:t.userId)&&void 0!==s?s:""}),j({...v,enableMemory:e}).catch(()=>{ew.Am.error(h("settings-data.error","Failed to update settings"))})},disabled:C&&!v.enableMemory}),className:(0,i.cn)(C&&"opacity-50"),children:(0,n.jsxs)("div",{children:[(0,n.jsxs)(el,{className:"flex flex-row items-center gap-1.5",children:[h("Personalize Grok with your conversation history","Personalize Grok with your conversation history"),(0,n.jsx)(eg.v,{})]}),(0,n.jsxs)(eo,{children:[h("Personalize Grok with your conversation history.description","Allow Grok to remember details from your previous conversations. You can delete individual conversations to forget the associated details. Temporary chats are never stored."),C&&(0,n.jsxs)("span",{className:"italic",children:[" ",h("Personalize Grok with your conversation history.gdpr","This feature is not available in your region.")]})]})]})}),g.user&&(0,n.jsx)(ec,{action:(0,n.jsx)(ey.default,{href:"/files",children:(0,n.jsx)(p.zx,{variant:"outline",rounded:!0,onClick:()=>{u()},children:h("settings-data.file-browser.action","Manage")})}),children:(0,n.jsxs)("div",{children:[(0,n.jsx)(el,{className:"flex flex-row items-center gap-1.5",children:h("settings-data.file-browser.title","See Files and Assets")}),(0,n.jsx)(eo,{children:h("settings-data.file-browser.description","See all the files and assets you have uploaded to Grok. You can also delete them here.")})]})}),(0,n.jsx)(ec,{action:(0,n.jsx)(p.zx,{variant:"outline",rounded:!0,onClick:N,children:h("Export","Export")}),children:(0,n.jsxs)("div",{children:[(0,n.jsx)(el,{children:h("Export Account Data","Export Account Data")}),(0,n.jsx)(eo,{children:h("Export Account Data.description","You can download all data associated with your account below. This data includes everything stored in all xAI products.")})]})}),(0,n.jsxs)(ec,{action:(0,n.jsx)(p.zx,{variant:"outline",rounded:!0,btnColor:b?"danger":"default",onBlur:()=>y(!1),onClick:()=>{b?(ej.t.getState().fetchSoftDeleteAllConversations().catch(()=>{console.error(h("Failed to delete conversations","Failed to delete conversations"))}),f.routeToConversation(void 0),y(!1)):y(!0)},children:b?h("Are you sure?","Are you sure?"):h("Delete","Delete")}),children:[(0,n.jsx)(el,{children:h("Delete All Conversations","Delete All Conversations")}),(0,n.jsx)(eo,{children:h("Delete All Conversations.description","Delete all of your conversation data.")})]}),(0,n.jsxs)(ec,{action:(0,n.jsx)(p.zx,{variant:"outline",rounded:!0,btnColor:"danger",className:"max-w-full",onClick:k,children:(0,n.jsx)("span",{className:"truncate",children:h("Permanently Delete","Delete")})}),children:[(0,n.jsx)(el,{children:h("Delete Account","Delete Account")}),(0,n.jsx)(eo,{children:h("Delete Account.description","Permanently delete your account and associated data from the xAI platform. Deletions are immediate and cannot be undone.")})]})]})}var ek=s(61090),eC=s(1763),eS=s(36547);function eI(){let{t:e}=(0,w.$G)("settings"),{client:t}=(0,eb.useStatsigClient)(),s=(0,es.F)(e=>e.userSettings.preferences.selectedSystemPromptId),a=(0,eC.Zv)(e=>s?e.draftPromptById[s]:void 0),r=(0,eC.Zv)(e=>s?e.byId[s]:void 0);(0,o.useEffect)(()=>{!a&&s&&eC.Zv.getState().upsertDraftPrompt((null==r?void 0:r.prompt)||"",s)},[s]);let l=(0,o.useMemo)(()=>!!(0,eC.DL)(s)&&(!r&&!!a||!!r&&a!==r.prompt),[a,r]),c=(0,eC.Zv)(ei.Z("list")),d=(0,o.useMemo)(()=>c.find(e=>!e.isPreset)||eC.X5,[c]),u=(0,o.useMemo)(()=>c.filter(e=>e.isPreset),[c]),h=(0,o.useCallback)(e=>{let s=es.F.getState();s.userSettings.preferences.selectedSystemPromptId===e.personalityId?(t.logEvent("settings-personality-selected","none",{personalityId:"none"}),s.userSettings.preferences.selectedSystemPromptId=void 0,s.fetchSetPreference("selectedSystemPromptId",void 0).catch(e=>{(0,B.H)("settings-personality:handleSelectPersonality",e)})):(t.logEvent("settings-personality-selected",e.personalityId,{personalityId:e.personalityId}),s.userSettings.preferences.selectedSystemPromptId=e.personalityId,s.fetchSetPreference("selectedSystemPromptId",e.personalityId).catch(e=>{(0,B.H)("settings-personality:handleSelectPersonality",e)}))},[t]),p=(0,o.useCallback)(e=>{let t=eC.Zv.getState(),s=es.F.getState(),n=s.userSettings.preferences.selectedSystemPromptId;if(!n)return;t.upsertDraftPrompt(e,n);let a=t.byId[n];a?t.fetchUpdatePersonality({personalityId:n,name:a.name,description:a.description,prompt:e,isPreset:!0}).catch(e=>{(0,B.H)("settings-personality:handleSave",e),ew.Am.error(e.message)}):t.fetchCreatePersonality({...eC.X5,prompt:e}).then(e=>{s.fetchSetPreference("selectedSystemPromptId",e.personalityId).catch(e=>{(0,B.H)("settings-personality:handleSelectPersonality",e)})}).catch(e=>{(0,B.H)("settings-personality:handleSave",e),ew.Am.error(e.message)})},[s]),x=(0,o.useCallback)(()=>{let e=eC.Zv.getState(),t=es.F.getState().userSettings.preferences.selectedSystemPromptId;t&&e.upsertDraftPrompt((null==r?void 0:r.prompt)||"",t)},[r,s]),m=(0,o.useCallback)(e=>{let t=eC.Zv.getState();s&&t.upsertDraftPrompt(e,s)},[s]),g=(0,o.useId)();return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("p",{className:"pl-4 pb-3 text-sm font-semibold",children:e("Customize Grok's Response","Customize Grok's Response")}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2 px-1 mb-6",children:[d&&(0,n.jsx)(eD,{personality:d,isSelected:(0,eC.DL)(s),handleSelectPersonality:h}),u.map(e=>(0,n.jsx)(eD,{personality:e,isSelected:s===e.personalityId,handleSelectPersonality:h},e.personalityId))]}),(0,n.jsxs)("div",{className:(0,i.cn)("flex-col gap-2 px-1",s?"flex":"hidden"),children:[(0,n.jsx)("div",{className:"flex items-center gap-2 pl-3 text-sm tex‹t-primary",children:(0,n.jsx)("label",{htmlFor:g,className:(0,i.cn)({"text-secondary":!(0,eC.DL)(s)}),children:e("Custom Instructions","Custom Instructions")})}),(0,n.jsx)(ek.v,{value:a||"",onChange:m,isDirty:l,placeholder:e("How should Grok behave?","How should Grok behave?"),onSave:p,onReset:x,disabled:!(0,eC.DL)(s),textareaId:g})]}),(0,n.jsxs)("div",{className:(0,i.cn)("flex flex-row gap-2 h-full px-8  items-center text-sm text-secondary",s?"hidden":"flex"),children:[(0,n.jsx)(eS.Z,{className:"size-4 shrink-0"}),e("Select an instruction set from above to customize Grok's responses.","Select an instruction set from above to customize Grok's responses.")]})]})}function eD(e){let{personality:t,isSelected:s,handleSelectPersonality:a}=e,r=(0,o.useCallback)(()=>{a(t)},[a,t]);return(0,n.jsxs)(p.zx,{className:(0,i.cn)("flex flex-col items-center justify-start gap-1","text-wrap text-start","w-full rounded-2xl flex-row p-3 group","ring-1 ring-inset ring-toggle-border hover:ring-card-border-focus hover:bg-card-hover text-primary","relative","min-h-16 pr-8",s&&"bg-button-ghost-hover pr-4"),variant:"none",size:"none",onClick:r,children:[(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("p",{className:"text-sm text-primary",children:t.name}),(0,n.jsx)("p",{className:"text-xs text-secondary",children:t.description})]}),s&&(0,n.jsx)(z.Z,{className:"size-4 text-secondary"})]})}var eE=s(78174),e_=s(98526),eP=s(46648),ez=s(8236),eA=s(20795),eM=s(82247),eL=s(51529),eF=s(38789),eO=s(44473),eG=s(33233),eZ=s(81828),eR=s(16407),eT=s(41739),eB=s(98964),e$=s(49901),eU=s(23859),eH=s(69074);function eW(e){let{name:t,icon:s,provider:a,connector:r,disconnectErrorMessage:i}=e,{t:l}=(0,w.$G)("settings"),o=(0,en.NL)(),{client:c}=(0,eb.useStatsigClient)(),d=(0,en.Db)({mutationFn:async()=>{let e=window.location.host,t="".concat(e.startsWith("localhost")?"http://":"https://").concat(e).concat(eB.zS),s=await (0,q.t)(t,a);window.open(s||eB.DA,"_blank")},onError:e=>{(0,B.H)("settings.connected-apps.connect-".concat(a),e),window.open(eB.DA,"_blank")}}),u=(0,en.Db)({mutationFn:async()=>{let e=null==r?void 0:r.oauthConnectorId;if(!e)return;await (0,eR.Ox)({oauthConnectorId:e});let t=["oauth-connectors"];await o.cancelQueries({queryKey:t}),o.setQueryData(t,t=>t.filter(t=>t.oauthConnectorId!==e))},onError:e=>{(0,B.H)("settings.connected-apps.disconnect-".concat(a),e),ew.Am.error(i)}}),h=!!r,x=d.isPending||u.isPending,m=h?l("settings.connected-apps.disconnect","Disconnect"):l("settings.connected-apps.connect","Connect");return(0,n.jsx)(ec,{action:(0,n.jsx)(p.zx,{variant:"outline",rounded:!0,btnColor:h?"danger":"default",onClick:()=>{if(h){c.logEvent("disconnect-oauth-clicked",a),u.mutate();return}c.logEvent("connect-oauth-clicked",a),d.mutate()},disabled:x,children:x?(0,n.jsx)(eT.$,{size:"sm"}):m}),className:"text-md",children:(0,n.jsxs)(el,{className:"flex flex-row items-center gap-1.5",children:[(0,n.jsx)(s,{size:16}),t]})})}function eY(){let{t:e}=(0,w.$G)("settings"),t=(0,R.g)(),{data:s}=(0,e$.h)(),a=null==s?void 0:s.find(e=>"GOOGLE_DRIVE"===e.provider),r=null==s?void 0:s.find(e=>"MICROSOFT_ONEDRIVE"===e.provider);return(0,n.jsxs)("div",{className:"flex flex-col w-full h-full gap-6",children:[t.ENABLE_GOOGLE_DRIVE&&(0,n.jsx)(eW,{name:e("settings.connected-apps.google-drive","Google Drive"),icon:eU.Z,provider:"GOOGLE_DRIVE",connector:a,disconnectErrorMessage:e("settings.connected-apps.failed-to-disconnect-google-drive","Failed to disconnect Google Drive")}),t.ENABLE_MICROSOFT_ONEDRIVE&&(0,n.jsx)(eW,{name:e("settings.connected-apps.microsoft-onedrive","Microsoft OneDrive"),icon:eH.Mwr,provider:"MICROSOFT_ONEDRIVE",connector:r,disconnectErrorMessage:e("settings.connected-apps.failed-to-disconnect-microsoft-onedrive","Failed to disconnect Microsoft OneDrive")})]})}var eX=s(70398),eV=s(70917);function eK(e){let{icon:t,text:s,tab:a}=e,r=(0,y.w)(),l=(0,eX.ng)(ei.Z("tab")),c=(0,eX.ng)(ei.Z("setTab")),d="account"===a?l===a||!r&&"home"===l:l===a,u=(0,o.useCallback)(()=>{c(a)},[a]);return(0,n.jsxs)(p.zx,{variant:"ghost",size:"md",className:(0,i.cn)("group gap-3 px-4 justify-start h-10 hover:bg-card-hover min-w-40",r&&"text-lg h-10 flex",d&&"hover:text-primary text-primary [&>svg]:text-primary bg-button-ghost-hover"),onClick:u,children:[(0,n.jsx)(t,{size:18,className:(0,i.cn)("text-secondary group-hover:text-primary",{"text-primary":d})})," ",s,r&&(0,n.jsx)(eV.Z,{className:"text-secondary !ml-auto",size:18})]})}function eq(e){let{tab:t}=e,{t:s}=(0,w.$G)("settings");switch((0,y.w)()?t:"home"){case"account":return s("settings-tab.account","Account");case"appearance":return s("settings-tab.appearance","Appearance");case"chat":return s("settings-tab.chat","Chat");case"personality":return s("settings-tab.personality","Personality");case"data":return s("settings-tab.data","Data Controls");case"billing":return s("settings-tab.billing","Billing");case"dev":return s("settings-tab.dev","Dev");case"behavior":return s("settings-tab.behavior","Behavior");case"connected-apps":return s("settings-tab.connected-apps","Connected Apps");default:return s("settings-tab.home","Settings")}}let eJ=async()=>{let e=void 0;if(e)return(0,n.jsx)(e,{})},eQ=()=>{var e,t,s;let{t:a}=(0,w.$G)("settings"),l=(0,y.w)(),c=(0,eX.ng)(ei.Z("tab")),d=(0,eX.ng)(ei.Z("setTab")),{resolvedTheme:u}=(0,eZ.F)(),h=(0,eX.ng)(ei.Z("open")),x=(0,eX.ng)(ei.Z("setOpen")),m=(0,R.g)(),g=(0,r.kP)(),{ACCOUNT_URL:j}=(0,f.O)(),b=(0,o.useCallback)(()=>{window.open(j+"/account?redirect=grok-com&theme=".concat(u),"_blank")},[u,j]),N=(0,o.useCallback)(()=>{window.location.assign(j+"/account?redirect=grok-com&theme=".concat(u))},[u,j]),S=(0,o.useCallback)(()=>{x(!1)},[x]),{client:I}=(0,eb.useStatsigClient)();(0,e_.y)(eE.aj,e=>{e.preventDefault(),e.stopPropagation(),I.logEvent("pressed_cmd_,"),x(!h)},[h,x,I]);let{data:D}=(0,T.Pd)(),E=null===(e=g.user)||void 0===e?void 0:e.xSubscriptionType,_=m.HIDE_SUBSCRIPTION_FLOWS_FROM_PREMIUM_PLUS_USERS&&"PremiumPlus"===E||(null==D?void 0:D.hasSubscriptions);return(0,n.jsxs)(k.c,{open:h,setOpen:x,contentClassName:(0,i.cn)("focus:outline-0 focus-within:outline-0 gap-2 bg-background rounded-3xl md:min-h-[420px] h-[calc(100dvh-64px)] md:h-4/5 md:h-3/5 md:w-[calc(100%-2rem)] max-w-3xl flex flex-col md:overflow-hidden"),children:[(0,n.jsxs)(C.fK,{className:"relative flex-shrink-0 px-6 pt-5 pb-2 min-h-10",children:[(0,n.jsxs)(C.$N,{className:(0,i.cn)("text-xl text-left","flex flex-row items-center",l&&"home"!==c,l?"justify-center":"justify-between"),children:[(0,n.jsx)(eq,{tab:c}),!l&&(0,n.jsx)(p.zx,{className:"-mt-2 -mr-2",variant:"ghost",title:a("Close","Close"),size:"iconMd",onClick:()=>{x(!1),d("home")},tabIndex:-1,children:(0,n.jsx)(v.b0,{size:18,className:"text-secondary"})})]}),(0,n.jsx)(C.Be,{hidden:!0,children:a("Settings","Settings")}),l&&"home"!==c&&(0,n.jsx)(p.zx,{className:"absolute left-3.5 -bottom-1",variant:"ghost",size:"icon",onClick:()=>d("home"),children:(0,n.jsx)(eP.Z,{size:18,className:"text-secondary"})})]}),(0,n.jsxs)("div",{className:(0,i.cn)("flex flex-col w-full sm:flex-row focus:outline-none h-0 flex-grow",l&&"pb-8 pt-4"),children:[(!l||"home"===c)&&(0,n.jsxs)("div",{className:(0,i.cn)("flex flex-col gap-1.5",{"gap-3 px-2 w-full":l,"pl-3":!l}),children:[(0,n.jsx)(eK,{icon:ez.Z,text:a("account","Account"),tab:"account"}),(0,n.jsx)(eK,{icon:eA.Z,text:a("appearance","Appearance"),tab:"appearance"}),(0,n.jsx)(eK,{icon:eM.Z,text:a("settings.behavior",{defaultValue:"Behavior"}),tab:"behavior"}),(0,n.jsx)(eK,{icon:eL.Z,text:a("Customize","Customize"),tab:"personality"}),g.user&&(0,n.jsx)(eK,{icon:eF.Z,text:a("Data Controls","Data Controls"),tab:"data"}),_&&(0,n.jsx)(eK,{icon:eO.Z,text:a("setting-tab.billing","Billing"),tab:"billing"}),g.user&&(0,n.jsx)(eK,{icon:eG.Z,text:a("settings.connected-apps","Connected Apps"),tab:"connected-apps"})]}),("account"===c||!l&&"home"===c)&&(0,n.jsx)(e0,{children:(0,n.jsx)(ed,{onManage:b})}),"appearance"===c&&(0,n.jsx)(e0,{children:(0,n.jsx)(ex,{})}),"behavior"===c&&(0,n.jsx)(e0,{children:(0,n.jsx)(em,{})}),"personality"===c&&(0,n.jsx)(e0,{children:(0,n.jsx)(eI,{})}),"data"===c&&g.user&&(0,n.jsx)(e0,{children:(0,n.jsx)(eN,{onManage:b,onDelete:N,onNavigate:S})}),"billing"===c&&g.user&&(0,n.jsx)(e0,{children:(0,n.jsx)(Y,{})}),"connected-apps"===c&&g.user&&(0,n.jsx)(e0,{children:(0,n.jsx)(eY,{})}),"dev"===c&&g.user&&(null===(s=g.user)||void 0===s?void 0:null===(t=s.email)||void 0===t?void 0:t.endsWith("@x.ai"))&&(0,n.jsx)(e0,{children:(0,n.jsx)(o.Suspense,{fallback:(0,n.jsx)("div",{children:"Loading DevTools..."}),children:(0,n.jsx)(eJ,{})})})]})]})};function e0(e){let{children:t}=e;return(0,n.jsx)("div",{className:(0,i.cn)("flex-1 w-full h-full","pl-4 pr-4 pb-10 md:pr-4","overflow-scroll focus:outline-none"),children:t})}var e1=s(36424),e2=s(14885),e4=s(51544),e5=s(86248),e3=s(48600),e6=s(12307),e8=s(23310),e7=s(5696),e9=s(46456),te=s(22838),tt=s(55608),ts=s(372),tn=s(19922),ta=s(99870),tr=s(72512),ti=s(96059),tl=s(54670);let to=(0,o.memo)(e=>{let{conversation:t}=e,{conversationId:s}=t,{data:a,error:r}=(0,tl.ri)(s);(0,ti.c)(r);let l=null==a?void 0:a[0];if(!l)return null;let{name:o,icon:c,workspaceId:d}=l;return(0,n.jsx)(ey.default,{href:"/workspace/".concat(d),children:(0,n.jsxs)(tt.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:(0,i.cn)("border border-border-l2 px-3 py-1 rounded-full","text-sm text-secondary flex flex-row items-center gap-1","ml-2 mt-0.5"),children:[(0,n.jsx)("span",{className:(0,i.cn)("[&>svg]:h-3.5 [&>svg]:w-3.5"),children:(0,n.jsx)(tr.in,{icon:c})}),(0,n.jsx)("span",{className:"max-w-[0px] @[340px]/nav:max-w-[75px] @[375px]/nav:max-w-[100px] @[430px]/nav:max-w-[150px] @[500px]/nav:max-w-[200px] @[960px]/nav:max-w-[400px] truncate",children:o})]})})}),tc={size:20,strokeWidth:2};function td(e){let{hash:t,isIncognito:s,onLinkClick:a}=e,{t:r}=(0,w.$G)("chat"),{commandPrefix:i}=(0,e5.i)(),l=s?r("Switch to Default Chat","Switch to Default Chat"):r("Switch to Private Chat","Switch to Private Chat"),o=s?"".concat(i,"J"):"".concat(i,"⇧J");return(0,n.jsx)(p.g$,{rounded:!0,variant:"ghost",size:"iconMd",overideIconStyle:!0,"aria-label":l,stayOpenOnClick:!0,tooltipAsChild:!0,tooltipContent:(0,n.jsxs)("div",{className:"flex flex-row gap-1",children:[l,i&&(0,n.jsx)("span",{className:"text-secondary",children:o})]}),tooltipContentProps:{side:"bottom"},asChild:!0,children:(0,n.jsx)(ey.default,{href:"/chat".concat(s?"":t),onClick:a,children:s?(0,n.jsx)(v.L_,{...tc,className:"text-purple-400 dark:text-purple-300","data-testid":"pi-ghost-fill"}):(0,n.jsx)(v.fh,{...tc,"data-testid":"pi-ghost"})})})}let tu=(e,t,s)=>e?t?a.J5:"ja"===s?a.fk:a.I3:"ja"===s?a.nD:a.$I,th="#private";function tp(e){var t,s,a;let{conversationIsLoading:l,conversation:c,label:d,shared:u,isOptimisticConversation:j,hideIncognito:y}=e,{i18n:N}=(0,w.$G)("chat"),{t:k}=(0,w.$G)("base"),C=(0,er.useRouter)(),{routeToConversation:S}=(0,ef.o)(),[I,D]=(0,ts.H)(),E=(0,r.kP)(),_=E.user,P=(0,e4.r)(),{commandPrefix:z,os:A}=(0,e5.i)(),{client:M}=(0,eb.useStatsigClient)(),L=(0,o.useRef)(null),G=(0,tn.gK)(ei.Z("setOptimisticConversationId")),Z=(0,tn.gK)(ei.Z("setReasoningMode")),$=(0,tn.gK)(ei.Z("establishNewConversation")),U=(0,e8._)(ei.Z("setIsUpselling")),H=(0,es.F)(ei.Z("isIncognito")),W=(0,es.F)(ei.Z("setIsIncognito")),Y=(0,es.F)(e=>e.userSettings.preferences.showActiveTabs),X=(0,e6.n)(ei.Z("setReportDialogIsOpen")),V=(0,R.g)(),{SUPPORT_URL:K}=(0,f.O)(),q=(0,O.X)(),{data:J}=(0,T.Pd)(),Q=null!==(s=null==J?void 0:J.hasSubscriptions)&&void 0!==s&&s,ee=null!==(a=null==J?void 0:null===(t=J.subscriptions)||void 0===t?void 0:t.some(e=>!!e.enterprise))&&void 0!==a&&a,et=(0,es.F)(ei.Z("selectedLanguage")),en=(0,o.useMemo)(()=>et||N.languages.find(e=>e in x.l2)||x.sm,[N.languages,et]),ea=tu(Q,ee,en),el=(0,tn.gK)(ei.Z("lastMessageId"));(0,o.useEffect)(()=>{I===th&&(W(!0),D(""))},[I]);let eo=(0,o.useCallback)(()=>{X(!0)},[X]),ec=(0,o.useCallback)(()=>{C.push("/sign-out")},[C]),ed=(0,o.useCallback)(()=>{G(void 0),W(!1),S(void 0)},[C,u]),eu=(0,o.useCallback)(e=>{e.ctrlKey||e.metaKey||(e.preventDefault(),ed())},[ed]);(0,e_.y)(eE.VM,e=>{e.preventDefault(),e.stopPropagation(),M.logEvent("pressed_cmd_j"),ed()},[ed,M]);let[eh,ep]=(0,o.useState)(!1),ex=(0,o.useCallback)(()=>{W(!0),S(void 0)},[]);(0,o.useCallback)(e=>{e.ctrlKey||e.metaKey||ex()},[ex]);let em=!!E.user&&!y;(0,e_.y)(eE.op,e=>{em&&(e.preventDefault(),e.stopPropagation(),M.logEvent("pressed_cmd_shift_j"),ex())},[em,ex,M]);let eg=(0,o.useCallback)(e=>{e.ctrlKey||e.metaKey||(e.preventDefault(),W(!H))},[H]),ev=(0,eX.ng)(ei.Z("toggleOpen")),ej=(0,g.s)(ei.Z("openMenu")),ew=(0,e1.N)(ei.Z("setDrawerOpen")),eN=(0,e1.N)(ei.Z("drawerOpen")),ek=(0,o.useCallback)(()=>{ew(!eN)},[eN,ew]),eC=(0,e1.N)(ei.Z("tabsCount")),eS=j?H:c?!!_&&c.temporary:H,{getPersonaForConversation:eI}=(0,e3.HG)(),eD=eI(c),eP=(0,o.useCallback)(async()=>{if(!eD)return;Z("none");let{initialQuery:e,toolOverrides:t}=(0,F.oe)(eD.personaId,k);M.logEvent("click_persona",eD.personaId,{location:"chat-top-nav"}),M.logEvent("new_persona_chat",e,{location:"chat-top-nav",toolOverrides:JSON.stringify(t)}),await q(),await $({message:e,toolOverrides:t,persona:eD,enableRetries:V.ENABLE_AUTO_STREAM_RETRY}).catch((0,B.n4)("chat-top-nav:establishNewConversation"))},[eD,Z,V.ENABLE_AUTO_STREAM_RETRY]),ez=(0,o.useMemo)(()=>{if(!eD)return null;let{icon:e,colorClassName:t}=(0,F.DB)(eD.personaId);return(0,n.jsxs)(tt.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:(0,i.cn)("border border-border-l2 px-3 py-1 rounded-full","text-sm text-secondary flex flex-row items-center gap-1","ml-2 mt-0.5"),children:[(0,n.jsx)("span",{className:(0,i.cn)("[&>svg]:h-3.5 [&>svg]:w-3.5",t),children:e}),(0,n.jsx)("span",{className:(0,i.cn)("max-w-[0px] @[340px]/nav:max-w-[75px] @[375px]/nav:max-w-[100px] @[430px]/nav:max-w-[150px] @[500px]/nav:max-w-max truncate"),children:eD.name})]})},[c,eD]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{ref:L,className:"w-full relative @container/nav z-40",children:[(0,n.jsxs)("div",{className:(0,i.cn)("h-16 top-0 @[80rem]/nav:h-0 @[80rem]/nav:top-8","absolute z-10 flex flex-row items-center justify-center w-full bg-gradient-to-b","from-background via-background via-80% to-transparent @[80rem]/nav:from-transparent @[80rem]/nav:via-transparent"),children:[(0,n.jsxs)("div",{className:"absolute flex flex-row items-center start-1",children:[(0,n.jsx)(ey.default,{href:"/","aria-label":k("Home page","Home page",{ns:"chat"}),onClick:eu,className:(0,i.cn)("ms-2 me-[0.5] rounded-lg focus:outline-none focus-visible:ring-1 focus-visible:ring-ring","w-8 sm:w-auto"),children:(0,n.jsx)(ea,{className:(0,i.cn)("opacity-80 hover:opacity-100 fill-black dark:fill-white","[&>path]:hidden sm:[&>path]:block [&>#mark]:block [&>#furigana]:opacity-60 [&>#subtitle]:opacity-60")})}),ez,!u&&c&&(0,n.jsx)(to,{conversation:c})]}),(0,n.jsx)("div",{className:(0,i.cn)("grow justify-center hidden max-w-[50%] @[640px]/nav:flex"),children:d?(0,n.jsx)("div",{className:"text-muted-foreground",children:d}):null}),(0,n.jsxs)("div",{className:"absolute flex flex-row items-center gap-0.5 ml-auto end-3",children:[eD&&!l&&c&&(0,n.jsx)(e2.k,{children:(0,n.jsx)(p.g$,{className:(0,i.cn)("rounded-full",(0,F.DB)(eD.personaId).colorClassName),variant:"ghost",size:"icon",tooltipContent:(0,n.jsxs)("p",{children:[k("New Persona Chat","New Persona Chat",{ns:"chat"}),z&&(0,n.jsxs)("span",{className:"ml-1 text-secondary",children:[z,"J"]})]}),tooltipContentProps:{side:"bottom"},onClick:eP,asChild:!0,children:(0,n.jsx)("div",{onClick:eP,children:(0,n.jsx)(v.VM,{size:20,strokeWidth:2})})})},"new-persona-chat-button"),!eD&&(!l&&c||u)&&(0,n.jsx)(e2.k,{children:(0,n.jsx)(p.g$,{className:"rounded-full",variant:"ghost",size:"icon",tooltipContent:(0,n.jsxs)("p",{children:[k("start new chat","New Chat",{ns:"chat"}),z&&(0,n.jsxs)("span",{className:"ml-1 text-secondary",children:[z,"J"]})]}),tooltipContentProps:{side:"bottom"},asChild:!0,children:(0,n.jsx)(ey.default,{href:"/chat",onClick:eu,children:(0,n.jsx)(v.VM,{size:20,strokeWidth:2})})})},"new-chat-button"),c&&el&&!u&&!eS&&(0,n.jsx)(ta.T,{variant:"ghost",size:"icon",conversationId:c.conversationId,responseId:el,iconProps:{size:20,strokeWidth:2}}),em&&!l&&!c&&!u&&(0,n.jsx)(td,{hash:th,isIncognito:H,onLinkClick:eg}),(0,n.jsx)(p.g$,{variant:"ghost",size:"icon",className:"rounded-full","aria-label":k("History","History",{ns:"chat"}),onClick:()=>{M.logEvent("pressed_cmd_k"),ej()},tooltipContent:(0,n.jsxs)("div",{className:"flex flex-row gap-1",children:[k("History","History",{ns:"chat"}),z&&(0,n.jsxs)("span",{className:"text-secondary",children:["macos"===A?z:"".concat(z,"⇧"),"K"]})]}),children:(0,n.jsx)(b,{size:20})}),V.ENABLE_CONVERSATION_TABS&&Y&&P&&eC>0&&(0,n.jsx)(p.g$,{variant:"ghost",size:"icon",className:"rounded-full","aria-label":k("open-tabs-drawer-button.label","Tabs",{ns:"chat"}),onClick:ek,tooltipContent:(0,n.jsx)("div",{className:"flex flex-row gap-1",children:k("open-tabs-drawer-button.label","Tabs",{ns:"chat"})}),children:(0,n.jsx)(e9.Z,{className:"h-5 w-5"})}),E.user?(0,n.jsxs)(m.h_,{children:[(0,n.jsx)(m.$F,{asChild:!0,children:(0,n.jsx)(p.zx,{variant:"ghost",size:"icon",className:"p-1 rounded-full",children:(0,n.jsx)(h,{className:"w-8 h-8",user:E.user})})}),(0,n.jsxs)(m.AW,{side:"bottom",align:"end",sideOffset:6,className:"min-w-36 space-y-0.5",children:[(0,n.jsxs)(m.Xi,{onClick:ev,children:[(0,n.jsx)(v.IE,{className:"size-4 mr-2"}),k("user-dropdown.settings","Settings")]}),(0,n.jsxs)(m.Xi,{onClick:eo,children:[(0,n.jsx)(te.Z,{className:"size-4 mr-2"}),k("user-dropdown.report","Give Feedback")]}),(0,n.jsx)(m.Xi,{asChild:!0,children:(0,n.jsxs)(ey.default,{href:K,target:"_blank",children:[(0,n.jsx)(e7.CE5,{className:"size-4 mr-2"}),k("user-dropdown.support","Help & Support")]})}),Q?(0,n.jsx)(tx,{subscriptions:null==J?void 0:J.subscriptions}):(0,n.jsxs)(m.Xi,{onClick:()=>U(!0),children:[(0,n.jsx)(e7.iNk,{className:"size-4 mr-2"}),k("user-dropdown.upgrade","Upgrade plan")]}),(0,n.jsxs)(m.Xi,{onClick:ec,children:[(0,n.jsx)(v.E2,{className:"size-4 mr-2"}),k("user-dropdown.sign-out","Sign Out")]})]})]}):(0,n.jsx)(tm,{currentLanguage:en})]})]}),(0,n.jsx)(eQ,{})]})})}function tx(e){let{subscriptions:t}=e,{t:s}=(0,w.$G)("base"),[a,r]=(0,o.useState)(!1),i=null==t?void 0:t[0];return i?(0,n.jsxs)(m.Xi,{onClick:e=>{e.preventDefault(),e.stopPropagation(),i.stripe?(r(!0),$.Bh.subscriptionsCreateBillingPortalSession({body:{returnUrl:window.location.href}}).then(e=>{window.open(e.url,"_blank")}).catch((0,B.n4)("chat-top-nav:manage-subscription")).finally(()=>{r(!1)})):window.open(K(i),"_blank")},children:[a?(0,n.jsx)(U.Z,{height:16,width:16,className:"text-neutral-400 animate-spin !duration-1000 mr-2"}):(0,n.jsx)(H.Z,{height:16,width:16,className:"text-neutral-400 mr-2"}),s("user-dropdown.manage-subscription","Manage Subscription")]}):null}function tm(e){let{currentLanguage:t}=e,s=(0,er.useRouter)(),{t:a,i18n:r}=(0,w.$G)("chat"),{SUPPORT_URL:l}=(0,f.O)(),c=(0,R.g)(),{client:d}=(0,eb.useStatsigClient)(),[u,h]=(0,o.useState)(!1),x=(0,o.useCallback)(()=>{d.logEvent("sign_in_redirect",void 0,{location:"chat-top-nav"}),s.push("/sign-in")},[s,d]),g=(0,o.useCallback)(()=>{d.logEvent("sign_up_redirect",void 0,{location:"chat-top-nav"}),s.push("/sign-up")},[s,d]),j=(0,o.useCallback)(e=>{r.changeLanguage(e).then(()=>{es.F.getState().setSelectedLanguage(e),h(!1)}).catch((0,B.n4)("settings-account"))},[r]);return(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,n.jsxs)(m.h_,{children:[(0,n.jsx)(m.$F,{asChild:!0,children:(0,n.jsx)(p.g$,{variant:"ghost",size:"icon",className:"rounded-full hidden @sm:flex",tooltipContent:(0,n.jsx)("div",{className:"flex flex-row gap-1",children:a("Settings","Settings")}),children:(0,n.jsx)(v.IE,{size:20})})}),(0,n.jsxs)(m.AW,{side:"bottom",align:"end",sideOffset:6,className:"min-w-36 space-y-0.5",children:[(0,n.jsx)(eh.MF,{}),(0,n.jsx)(m.Xi,{onClick:()=>h(!0),children:a("Language","Language")}),c.SHOW_ANON_HELP_LINK&&(0,n.jsx)(m.Xi,{children:(0,n.jsx)(ey.default,{href:l,target:"_blank",children:a("Help & Feedback","Help & Feedback")})})]})]}),(0,n.jsxs)(p.zx,{size:"pill",variant:"primary",className:"h-8 px-3 text-sm",onClick:g,children:[(0,n.jsx)(ez.Z,{size:16,strokeWidth:2}),(0,n.jsx)("div",{children:a("Sign up","Sign up")})]}),(0,n.jsx)(p.zx,{size:"pill",variant:"none",className:(0,i.cn)("hidden @sm:flex","h-8 px-3 text-sm text-primary bg-transparent ring-1 ring-inset ring-toggle-border","hover:bg-button-secondary-hover hover:border-text-secondary"),onClick:x,children:(0,n.jsx)("div",{children:a("Sign in","Sign in")})}),(0,n.jsx)(L,{locale:t,open:u,onLocaleChange:j,onOpenChange:h})]})}},99870:function(e,t,s){s.d(t,{T:function(){return j}});var n=s(584),a=s(62339),r=s(22852),i=s(14885),l=s(41739),o=s(3210),c=s(24638),d=s(19005),u=s(7263),h=s(48454),p=s(32088),x=s(25693),m=s(67989),g=s(50240),f=s(66070),v=s(99406);let j=e=>{let{conversationId:t,responseId:s,variant:j,size:b,rounded:y,iconProps:w,showLabel:N,className:k}=e,{t:C}=(0,f.$G)("chat"),{client:S}=(0,p.useStatsigClient)(),[I,D]=(0,g.useState)(!1),E=(0,o.D)(),{mutate:_,isPending:P,data:z}=(0,x.Db)({mutationFn:()=>h.xU.chatShareConversation({conversationId:t,body:{responseId:s}})}),A=(0,g.useCallback)(e=>{let n=window.location.origin+"/share/"+e;S.logEvent("chat_share_pressed",n,{location:"share-button",conversationId:t,responseId:s,shareUrl:n}),D(!0),(0,d.G)(n,C("Copied share link to clipboard.","Copied share link to clipboard.")),setTimeout(()=>D(!1),1e3)},[C,t,s,S]),M=(0,g.useCallback)(()=>{if(null==z?void 0:z.shareLinkId){A(z.shareLinkId);return}_(void 0,{onSuccess:e=>{if(!e.shareLinkId){(0,c.H)("share-button:success",Error("Missing share link id")),v.Am.error("Failed to share conversation");return}A(e.shareLinkId)},onError:(0,c.n4)("share-button:error")})},[A,_,null==z?void 0:z.shareLinkId]);return(0,n.jsxs)(r.g$,{variant:j,size:b,rounded:y,"aria-label":C("Share conversation","Share conversation"),onClick:E?()=>{if(null==z?void 0:z.shareLinkId){A(z.shareLinkId);return}let e=new ClipboardItem({"text/plain":h.xU.chatShareConversation({conversationId:t,body:{responseId:s}}).then(e=>window.location.origin+"/share/"+(null==e?void 0:e.shareLinkId)).then(e=>new Blob([e],{type:"text/plain"}))});navigator.clipboard.write([e]).then(()=>{v.Am.success(C("Copied share link to clipboard.","Copied share link to clipboard.")),D(!0),setTimeout(()=>D(!1),1e3)}).catch(e=>v.Am.error(e.message))}:M,className:(0,u.cn)("rounded-full",k),tooltipContent:I?C("Copied!","Copied!"):C("Copy share link","Copy share link"),tooltipContentProps:{side:"bottom"},disabled:P,children:[(0,n.jsx)(i.k,{children:I?(0,n.jsx)(m.Z,{...w}):P?(0,n.jsx)(l.$,{size:"xs"}):(0,n.jsx)(a.aA,{...w})},I?"copied":"copy"),N&&(0,n.jsx)("span",{children:C("share conversation","Share")})]})}},56788:function(e,t,s){s.d(t,{s:function(){return i}});var n=s(27435);let a=[{id:"root",isSearchEnabled:!0,searchQuery:""}];class r{constructor(e,t){this.set=e,this.get=t,this.open=!1,this.selectedItem="",this.pages=a,this.onSearchQueryChange=e=>{let t=this.get().pages[this.get().pages.length-1];this.set({pages:[...this.get().pages.slice(0,-1),{...t,searchQuery:e}]})},this.openMenu=()=>{this.set({open:!0})},this.goBack=()=>{if(1===this.get().pages.length){this.onSearchQueryChange(""),this.set({open:!1}),this.setSelectedItem("");return}this.setSelectedItem(""),this.set({pages:this.get().pages.slice(0,-1)})},this.closeMenu=()=>{this.set({open:!1,selectedItem:"",pages:[{...this.get().pages[0],searchQuery:""}]})},this.setSelectedItem=(0,n.f0)(this.set,"selectedItem"),this.addPage=e=>{this.setSelectedItem(""),this.set({pages:[...this.get().pages,e]})}}}let i=(0,n.MT)(r)},90347:function(e,t,s){s.d(t,{X:function(){return o}});var n=s(79626),a=s(24638),r=s(50240),i=s(32509),l=s(47873);let o=()=>{let[e,t]=(0,i.Z)(n.tJ),[s,o]=(0,i.Z)(n.Xv),{user:c,refreshAnonUser:d}=(0,l.useSession)(),u=(0,r.useCallback)(async()=>{let{privateKey:e,anonUserId:s}=await (0,n.be)();t(s),o(e),await d(s,e)},[o,t,d]);return(0,r.useCallback)(async()=>{!c&&s&&e&&await d(e,s).catch(()=>{u().catch(e=>{console.error("Failed to initialize session"),(0,a.H)("maybe-refresh-anon-session",e)})})},[c,s,e,d,u])}},47192:function(e,t,s){s.d(t,{MF:function(){return x},oX:function(){return m},yU:function(){return p}});var n=s(584),a=s(22852),r=s(57791),i=s(7263),l=s(48269),o=s(50265),c=s(15917),d=s(5562),u=s(81828);s(50240);var h=s(66070);let p={light:{icon:o.Z,label:"Light"},dark:{icon:c.Z,label:"Dark"},system:{icon:d.Z,label:"System"}};function x(){let{t:e}=(0,h.$G)("base"),{setTheme:t,theme:s}=(0,u.F)(),o={light:e("Light","Light"),dark:e("Dark","Dark"),system:e("System","System")};return(0,n.jsx)("div",{className:"w-full px-1 pt-1 pb-1",children:(0,n.jsx)("div",{className:"flex items-stretch w-full gap-2 justify-stretch",children:Object.entries(p).map(e=>{let[c,{icon:d}]=e;return(0,n.jsxs)(r.u,{disableHoverableContent:!0,children:[(0,n.jsx)(l.aJ,{asChild:!0,children:(0,n.jsx)(a.zx,{className:(0,i.cn)("w-full rounded-lg",{"bg-button-ghost-hover":s===c}),size:"icon",variant:"ghost",onClick:()=>t(c),value:c,children:(0,n.jsx)(d,{size:16})})}),(0,n.jsx)(r._v,{side:"bottom",children:(0,n.jsx)("p",{children:o[c]})})]},c)})})})}function m(){let{t:e}=(0,h.$G)("base"),{setTheme:t,theme:s}=(0,u.F)(),r={light:e("Light","Light"),dark:e("Dark","Dark"),system:e("System","System")};return(0,n.jsx)("div",{className:"w-full px-1 pb-1",children:(0,n.jsx)("div",{className:"flex items-stretch w-full gap-2 justify-stretch",children:Object.entries(p).map(e=>{let[l,{icon:o}]=e;return(0,n.jsxs)(a.zx,{className:(0,i.cn)(s===l&&"bg-button-ghost-hover","w-full rounded-2xl flex-col p-3 group","ring-1 ring-inset ring-toggle-border hover:ring-card-border-focus hover:bg-card-hover text-primary"),variant:"none",size:"none",onClick:()=>t(l),value:l,children:[(0,n.jsx)(o,{className:(0,i.cn)("group-hover:text-primary",s===l?"text-primary":"text-secondary"),size:20}),(0,n.jsx)("p",{children:r[l]})]},l)})})})}},12307:function(e,t,s){s.d(t,{n:function(){return n}});let n=(0,s(13573).U)(e=>({reportDialogIsOpen:!1,setReportDialogIsOpen:t=>e(()=>({reportDialogIsOpen:t}))}))}}]);