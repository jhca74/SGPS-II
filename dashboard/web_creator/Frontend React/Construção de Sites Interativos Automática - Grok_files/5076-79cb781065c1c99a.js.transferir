!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4dcd0a66-0ce3-4fa1-affc-3eecea5147fd",e._sentryDebugIdIdentifier="sentry-dbid-4dcd0a66-0ce3-4fa1-affc-3eecea5147fd")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5076],{70323:function(e,t,n){n.d(t,{BO:function(){return s},L2:function(){return u},L5:function(){return f},MH:function(){return g},U5:function(){return d},VD:function(){return h},aX:function(){return i},hz:function(){return x},qy:function(){return a}});var r=n(50240);let i=e=>{let{iframeRef:t}=e,[n,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=()=>i(!0);return t.current&&t.current.addEventListener("load",()=>i(!0)),()=>{var n;null===(n=t.current)||void 0===n||n.removeEventListener("load",e)}},[t.current]),{isIframeReady:n,injectHTML:(0,r.useCallback)(e=>{var n;(null===(n=t.current)||void 0===n?void 0:n.contentWindow)&&t.current.contentWindow.postMessage({type:"html",html:e},"https://artifacts.grokusercontent.com")},[])}},o=["text/x-python","text/python"];function a(e){var t;return o.includes(null!==(t=e.contentType)&&void 0!==t?t:"")}function s(e){var t;return a(e)&&(null===(t=e.content)||void 0===t?void 0:t.includes("import pygame"))}let l=["text/x-tex","text/x-latex","text/latex","text/x"],c=["text/cpp","text/c","text/x-c++src","text/javascript","text/typescript","text/bash",...l,"text/x-sh",...o];function u(e){var t;return!s(e)&&c.includes(null!==(t=e.contentType)&&void 0!==t?t:"")}function d(e){var t;return l.includes(null!==(t=e.contentType)&&void 0!==t?t:"")}let m=["text/html"];function f(e){return m.includes(p(e))}function x(e){var t;let n=p(e);return null!==(t=n.split("/")[1])&&void 0!==t?t:n}function p(e){var t,n;return null!==(n=null===(t=e.contentType)||void 0===t?void 0:t.split(";")[0])&&void 0!==n?n:""}let v=["text/plain","text/markdown","text/html"];function g(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return!!(t.ENABLE_LATEX_PREVIEW&&n&&d(e))||v.includes(p(e))}function h(e){var t,n;return null!==(n=null===(t=e.contentType)||void 0===t?void 0:t.includes("report"))&&void 0!==n&&n}},59994:function(e,t,n){n.d(t,{Ou:function(){return k},et:function(){return _},F8:function(){return T}});var r=n(584),i=n(19922),o=n(79972),a=n(22852),s=n(47457),l=n(50240);let c={};function u(e,t){let n=(0,l.useRef)("function"==typeof t?t():t).current,[r,i]=(0,l.useState)(()=>{try{let t=window.sessionStorage.getItem(e);return t?JSON.parse(t):n}catch(e){return console.error("Error parsing sessionStorage value:",e),n}});return(0,l.useEffect)(()=>{let t=e=>{i(e)};return c[e]||(c[e]=[]),c[e].push(t),()=>{c[e]&&(c[e]=c[e].filter(e=>e!==t))}},[e]),(0,l.useEffect)(()=>{let t=t=>{if(t.key===e&&t.storageArea===window.sessionStorage){if(null!==t.newValue)try{i(JSON.parse(t.newValue))}catch(e){console.error("Error parsing storage event value:",e)}else i(n)}};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}},[e,n]),[r,t=>{try{let n="function"==typeof t?t(r):t;window.sessionStorage.setItem(e,JSON.stringify(n)),i(n),c[e]&&c[e].forEach(e=>e(n))}catch(e){console.error("Error setting sessionStorage value:",e)}}]}var d=n(96740),m=n(41384),f=n(7263),x=n(48454),p=n(41330),v=n(25693),g=n(81858),h=n.n(g),y=n(90517),b=n(9354),w=n(66070);let N="HcydF4kDI5",j=["QHguYWk=","QHRlYWNoeC5haQ=="],I=new Set(["amRsb3Zlc3RoaXNAZ21haWwuY29t","bWF0dGJzcmlAZ21haWwuY29t"]);function S(){let{user:e}=(0,o.kP)(),[t]=u(N,!1),n=null==e?void 0:e.email;return!!(n&&(I.has(n)||j.some(e=>n.endsWith(atob(e)))))&&!t}function k(){let{t:e}=(0,w.$G)("base"),[,t]=u(N,!1),{isChatPage:n,isSharePage:i,pageData:o}=(0,s.o)();return S()?(0,r.jsxs)("div",{className:"absolute top-0 right-1/2 translate-x-1/2 z-50 flex items-center gap-0",children:[n&&(0,r.jsx)(E,{}),i&&(null==o?void 0:o.shareLinkId)&&(0,r.jsx)(C,{shareLinkId:o.shareLinkId}),(0,r.jsx)(a.zx,{variant:"ghost",size:"iconSm",onClick:()=>{t(!0)},"aria-label":e("debug-menu-close.label","Close"),children:(0,r.jsx)(y.Z,{size:10})})]}):null}function C(e){let{shareLinkId:t}=e,{data:n}=(0,v.aM)({queryKey:["share",t],queryFn:()=>(0,d.z)(t,x.xU)});return n?(0,r.jsxs)("div",{className:"text-red-600 font-normal text-xs flex flex-row gap-1",children:[(0,r.jsx)("span",{children:"convo id: "}),(0,r.jsx)("span",{className:"block",children:null==n?void 0:n.conversation.conversationId})]}):null}function E(){let e=(0,i.gK)(b.Z("lastMessageId")),t=(0,p.CI)(b.Z("byId"));return(0,r.jsx)(a.zx,{className:"text-red-600 font-normal",variant:"text",size:"none",onClick:()=>{!function(e,t){let n=T(e,t),r=new Blob([null!=n?n:JSON.stringify({message:"No data to show"})],{type:"application/json"});if(r){let e=window.URL.createObjectURL(r);window.open(e,"_blank")}}(e,t)},children:"export"})}function _(e){let{response:t}=e;return S()?(0,r.jsxs)("div",{className:(0,f.cn)("absolute text-red-600 font-normal text-xs bottom-[2.5rem]","opacity-0 group-focus-within:opacity-100 group-hover:opacity-100 transition-opacity","flex flex-row gap-1"),children:[(0,r.jsx)("span",{children:"res id: "}),(0,r.jsx)("span",{className:"block",children:t.responseId})]}):null}function T(e,t){if(!e){console.error("No last message id");return}let n=t[e];if(!n){console.error("No response for last message id",e);return}return JSON.stringify((0,m.Bv)(n,t).map(e=>t[e]).map(e=>({role:"human"===e.sender?"user":"assistant",content:e.message,...h().pick(e,"thinkingTrace","steps","generatedImageUrls","metadata")})),null,2)}},85462:function(e,t,n){n.d(t,{L:function(){return H},Q:function(){return A}});var r=n(584),i=n(34521),o=n(19922),a=n(47457),s=n(95397),l=n(89576),c=n(65205),u=n(7263),d=n(48454),m=n(72930),f=n(32088),x=n(25693),p=n(78161),v=n(46648),g=n(47006),h=n(22838),y=n(76851),b=n(55608),w=n(90496),N=n(9354),j=n(50240),I=n(66070),S=n(99406),k=n(62339),C=n(35724),E=n(60470),_=n(22852),T=n(14885);let M=[],R=()=>(0,r.jsxs)("div",{className:"relative w-8 h-8 flex items-center justify-center filter blur-[1.5px]",children:[(0,r.jsx)(b.E.div,{className:"absolute w-4 h-4 rounded-full bg-opacity-90 shadow-lg",style:{background:"radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0) 70%)",boxShadow:"inset 2px 2px 4px rgba(255, 255, 255, 0.5), inset -2px -2px 4px rgba(0, 0, 0, 0.3)"},animate:{background:["radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8) 0%, rgba(139, 92, 246, 0.8) 50%, rgba(236, 72, 153, 0.8) 100%)","radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8) 0%, rgba(59, 130, 246, 0.8) 50%, rgba(139, 92, 246, 0.8) 100%)","radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8) 0%, rgba(139, 92, 246, 0.8) 50%, rgba(59, 130, 246, 0.8) 100%)","radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8) 0%, rgba(139, 92, 246, 0.8) 50%, rgba(236, 72, 153, 0.8) 100%)"],scale:[1,1.1,1]},transition:{duration:6,ease:"linear",repeat:1/0,times:[0,.33,.66,1]}}),(0,r.jsx)("div",{className:"absolute w-0.5 h-0.5 rounded-full bg-white opacity-5 blur-[2px]",style:{top:"35%",left:"35%"}}),(0,r.jsx)(b.E.div,{className:"absolute w-4 h-4 rounded-full",style:{border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"inset 0 0 5px rgba(255, 255, 255, 0.5)"},animate:{opacity:[.7,.5,.7]},transition:{duration:3,ease:"easeInOut",repeat:1/0}})]});function A(e){let{responseId:t,memoryReferences:n,className:i}=e,{t:a}=(0,I.$G)("base"),c=(0,s.g)(),{client:u}=(0,f.useStatsigClient)(),d=(0,o.gK)(N.Z("sidePanelContent")),m=(0,o.gK)(N.Z("setSidePanelContent")),x=(0,l.w)(),p=(0,j.useMemo)(()=>{if((null==d?void 0:d.type)!=="memoryReferences")return!1;let e=d.data.memoryReferences.map(e=>e.conversationId);return n.every((t,n)=>t.conversationId===e[n])&&n.length===e.length},[d,n]),v=(0,j.useCallback)(()=>{if(p){m(void 0);return}u.logEvent("open_memory_reference_list",t),m({type:"memoryReferences",data:{responseId:t,memoryReferences:n}})},[p,n,t,m,u]);return 0===n.length?null:(0,r.jsx)(_.g$,{"aria-label":a("response-action.referenced-conversations","Referenced Conversations"),tooltipContent:(0,r.jsx)("p",{children:a("response-action.referenced-conversations","Referenced Conversations")}),tooltipContentProps:{side:"bottom"},variant:"ghostSecondary",size:x?"iconMd":"iconSm",rounded:!0,onClick:v,className:i,children:(0,r.jsx)(T.k,{children:c.SHOW_ORB_ICON_MEMORY?(0,r.jsx)(R,{}):p?(0,r.jsx)(k.vJ,{className:"size-4 text-primary"}):(0,r.jsx)(k.vJ,{className:"size-4"})},p?"selected":"not-selected")})}function O(e){let{responseId:t,memoryConversationId:n,onSettled:i,onlyShowOnHover:a}=e,{t:s}=(0,I.$G)("base"),{client:l}=(0,f.useStatsigClient)(),c=(0,x.NL)(),u=(0,o.gK)(N.Z("conversationId")),[m,v]=(0,j.useState)(!1),g=(0,j.useCallback)(e=>{e.stopPropagation(),l.logEvent("begin_forget_memory_reference",t,{responseId:t,memoryConversationId:n,threadConversationId:null!=u?u:""}),v(!0);let r=setTimeout(()=>{v(!1)},3e3);return()=>clearTimeout(r)},[n,t,u,l]),{mutate:h,isPending:y}=(0,x.Db)({mutationFn:()=>d.xU.chatDeleteMemory({conversationIds:[n]}),onError:()=>{v(!1),S.Am.error(s("memory.failed-to-delete-memory","Failed to delete memory"))},onSettled:()=>{v(!1),c.invalidateQueries({queryKey:["memories",t]}).catch(()=>{S.Am.error(s("memory.failed-to-refresh-memory-list","Failed to refresh memory list"))}),null==i||i()}});return(0,r.jsx)(r.Fragment,{children:m?(0,r.jsx)(_.zx,{onClick:e=>{e.stopPropagation(),l.logEvent("forget_memory_reference",t,{responseId:t,memoryConversationId:n,threadConversationId:null!=u?u:""}),h()},variant:"destructive",rounded:!0,children:y?(0,r.jsx)(p.Z,{className:"size-4 animate-spin"}):s("Confirm","Confirm")}):(0,r.jsx)(_.zx,{className:a?"opacity-0 group-hover:opacity-100 transition-opacity duration-200":"",onClick:g,variant:"secondary",rounded:!0,children:s("Forget","Forget")})})}function L(e){let{responseId:t,memory:n,onClick:i}=e,{convoId:o,convoSummary:a}=n,l=(0,m.t)(N.Z("fetchGetConversation")),d=(0,s.g)(),f=(0,j.useCallback)(e=>{e.stopPropagation(),i()},[i]),{data:x,isLoading:p,error:v}=(0,c.f)(o?l(o):void 0),g=(0,j.useMemo)(()=>null==a?void 0:a.split("\n").map(e=>e.replace(/^[- ]*/,"")).join("\n"),[a]);return p||v||!x?null:(0,r.jsx)("div",{className:(0,u.cn)("block text-base hover:bg-card-hover rounded-xl focus:outline-none focus-within:outline-none focus-visible:ring-1 focus-visible:ring-ring w-full cursor-pointer"),onClick:f,children:(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between gap-4 p-4 group",children:[(0,r.jsxs)("div",{className:(0,u.cn)("flex flex-col gap-2 max-w-[400px]",d.SHOW_MEMORY_SUMMARY&&"w-full max-w-[600px]"),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm text-primary",children:x.title||"Untitled Memory"}),(0,r.jsx)("span",{className:"text-secondary text-sm",children:"  â€¢  "}),(0,r.jsx)(E.M,{conversation:x})]}),d.SHOW_MEMORY_SUMMARY&&(0,r.jsx)("div",{className:"max-h-[100px] overflow-hidden pb-4 -mb-4 fade-mask-bottom",children:(0,r.jsx)("p",{className:"mt-1 text-xs text-primary break-words",children:g})})]}),!d.SHOW_MEMORY_SUMMARY&&(0,r.jsx)(O,{responseId:t,memoryConversationId:o,onlyShowOnHover:!0})]})})}function U(e){let{responseId:t,memory:n,onOpen:o,onBack:a}=e,{convoId:s,convoSummary:l}=n,d=(0,m.t)(N.Z("fetchGetConversation")),{data:f,isLoading:x,error:p}=(0,c.f)(s?d(s):void 0),h=(0,j.useMemo)(()=>null==l?void 0:l.split("\n").map(e=>e.replace(/^[- ]*/,"")).join("\n\n"),[l]);return x||p||!f?null:(0,r.jsxs)("div",{className:(0,u.cn)("p-4 max-w-[600px]"),children:[(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,r.jsx)(_.zx,{variant:"ghostSecondary",size:"iconSm",onClick:()=>a(),children:(0,r.jsx)(v.Z,{className:"size-4"})}),(0,r.jsx)("div",{className:"group cursor-pointer relative text-sm",onClick:()=>o(),children:(0,r.jsxs)("span",{className:"group-hover:underline flex flex-row items-center gap-1",children:[(0,r.jsx)("span",{className:"line-clamp-1",children:f.title||"Untitled Memory"}),(0,r.jsx)(g.Z,{size:22,className:"text-primary rounded-full bg-card p-1 flex-shrink-0"})]})})]}),(0,r.jsx)(O,{responseId:t,memoryConversationId:s,onSettled:()=>{a()}})]}),(0,r.jsx)("div",{className:"p-4 prose dark:prose-invert text-sm",children:(0,r.jsx)(i.Cn,{sender:"",webSearchResults:M,xposts:M,children:null!=h?h:""})})]})}function H(e){let{responseId:t,memoryReferences:n}=e,{t:i}=(0,I.$G)("base"),o=(0,s.g)(),{routeToConversation:l}=(0,a.o)(),{client:c}=(0,f.useStatsigClient)(),{data:m,isLoading:p,error:v,refetch:g}=(0,x.aM)({queryKey:["memories",t],queryFn:()=>{let e=n.map(e=>e.conversationId).filter(e=>void 0!==e);return d.xU.chatGetMemory({body:{conversationIds:e}})}}),[N,S]=(0,j.useState)(null),k=(0,j.useCallback)(e=>{var n;c.logEvent("open_memory_reference",t,{memoryConversationId:null!==(n=e.convoId)&&void 0!==n?n:""}),o.OPEN_MEMORY_IN_NEW_TAB?window.open("/chat/".concat(e.convoId),"_blank"):l(e.convoId)},[l,c,o.OPEN_MEMORY_IN_NEW_TAB,t]);if(p)return(0,r.jsx)("div",{className:"flex flex-col items-center px-4 pt-1 pb-2 gap-2",children:(0,r.jsx)(C.S,{})});if(v)return(0,r.jsx)("div",{className:"flex flex-col items-center px-4 pt-1 pb-2 gap-2 w-full",children:(0,r.jsx)(b.E.div,{initial:{translateY:5,opacity:0},animate:{translateY:0,opacity:1},exit:{translateY:5,opacity:0},className:(0,u.cn)("w-fit","p-4 bg-card","shadow-sm","border border-input-border rounded-2xl","ml-4 md:mx-4"),children:(0,r.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,r.jsx)(h.Z,{className:(0,u.cn)("h-5 w-5 flex-shrink-0")}),(0,r.jsx)("div",{className:"flex-1 max-w-96",children:(0,r.jsx)("div",{className:"text-primary text-sm",children:i("memory.error","Failed to load memories.")})}),(0,r.jsxs)(_.zx,{variant:"secondary",rounded:!0,onClick:()=>{g()},children:[(0,r.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),i("Retry","Retry")]})]})})});if(!m||!m.memories)return(0,r.jsx)("div",{className:"flex flex-col items-center px-4 pt-1 pb-2 gap-2",children:(0,r.jsx)("p",{className:"text-sm text-primary",children:i("memory.no-memories","No memories to display.")})});let E=m.memories;return o.SHOW_MEMORY_SUMMARY?(0,r.jsx)(w.M,{children:(0,r.jsx)("div",{className:"flex flex-row",children:N?(0,r.jsx)(b.E.div,{initial:{x:200,opacity:0},animate:{x:0,opacity:1},exit:{x:200,opacity:0},transition:{duration:.1},className:"w-full",children:(0,r.jsx)(U,{responseId:t,memory:N,onOpen:()=>k(N),onBack:()=>S(null)})},"memory-detail"):(0,r.jsx)(b.E.div,{initial:{x:-200,opacity:0},animate:{x:0,opacity:1},exit:{x:-200,opacity:0},transition:{duration:.1},className:"flex flex-col items-center px-4 pt-1 pb-2 gap-2 max-w-full",children:E.length>0?null==E?void 0:E.map(e=>(0,r.jsx)(L,{responseId:t,memory:e,onClick:()=>S(null!=e?e:null)},e.convoId)):(0,r.jsx)("p",{className:"text-sm text-primary",children:i("memory.no-memories","No memories to display.")})},"memory-list")})}):(0,r.jsx)("div",{className:"flex flex-col items-center px-4 pt-1 pb-2 gap-2 max-w-full",children:E.length>0?null==E?void 0:E.map(e=>(0,r.jsx)(L,{responseId:t,memory:e,onClick:()=>k(e)},e.convoId)):(0,r.jsx)("p",{className:"text-sm text-primary",children:i("memory.no-memories","No memories to display.")})})}},60560:function(e,t,n){n.d(t,{l:function(){return l}});var r=n(584),i=n(7263),o=n(63653),a=n(48062),s=n(50240);let l=(0,s.forwardRef)((e,t)=>{let{className:n,onScroll:l,children:u,stickToBottom:d,onUnhookScroll:m,onShowScrollButton:f,scrollingToBottom:x}=e,p=(0,s.useRef)(null),v=(0,s.useRef)(null),g=(0,s.useCallback)(()=>{if(!p.current)return;v.current&&cancelAnimationFrame(v.current);let e=p.current,t=e.scrollTop,n=e.scrollHeight-e.clientHeight,r=n-t;if(r<=0)return;let i=null,o=a=>{if(!e)return;i||(i=a);let s=Math.min((a-i)/200,1);e.scrollTop=t+r*(1-(1-s)*(1-s)),s<1?v.current=requestAnimationFrame(o):(e.scrollTop=n,v.current=null)};v.current=requestAnimationFrame(o)},[]);(0,s.useEffect)(()=>{g()},[g,m,x]);let{scrollY:h}=(0,o.v)({container:p});(0,a.W)(h,"change",e=>{if(!p.current)return;let t=c(p.current);f(!d&&!t);let n=h.getPrevious();void 0!==n&&("up"!=(e-n>0?"down":"up")||t?t&&(null==m||m({scrollToBottomValue:!1,stickToBottomValue:d})):(v.current&&cancelAnimationFrame(v.current),null==m||m({scrollToBottomValue:!1,stickToBottomValue:!1}))),null==l||l(t)});let y=(0,s.useCallback)(e=>{p.current&&p.current.scrollTo({top:p.current.scrollHeight,behavior:e})},[]);return(0,s.useEffect)(()=>{if(!p.current)return;let e=new MutationObserver(()=>{if(!p.current)return;let e=c(p.current);f(!d&&!e),d&&!e&&g()});return e.observe(p.current,{childList:!0,subtree:!0}),()=>{e.disconnect()}},[d,f,g]),(0,s.useImperativeHandle)(t,()=>{var e,t,n;return{scrollToBottom:y,scrollTo:e=>{var t;return null===(t=p.current)||void 0===t?void 0:t.scrollTo(e)},el:p.current,scrollHeight:null===(e=p.current)||void 0===e?void 0:e.scrollHeight,scrollTop:null===(t=p.current)||void 0===t?void 0:t.scrollTop,clientHeight:null===(n=p.current)||void 0===n?void 0:n.clientHeight}}),(0,r.jsx)("div",{ref:p,className:(0,i.cn)("w-full h-full overflow-y-auto overflow-x-hidden scrollbar-gutter-stable",n),style:{overflowAnchor:"none"},children:u})});function c(e){return e.scrollHeight<e.scrollTop+e.clientHeight+5}},60470:function(e,t,n){n.d(t,{M:function(){return u},r:function(){return c}});var r=n(584),i=n(32791),o=n(16199),a=n(7263),s=n(54063),l=n(50240);function c(e){let t=new Date(e),n=new Date,r=(n.getTime()-t.getTime())/864e5;return r<1?(0,o.Z)((0,s.U)(e,n,{locale:i.Z.language})):r<7?(0,o.Z)((0,s.U)(e,n,{unit:"day",locale:i.Z.language})):t.getFullYear()===n.getFullYear()?t.toLocaleDateString(i.Z.language,{day:"numeric",month:"short"}):t.toLocaleDateString(i.Z.language,{day:"numeric",month:"short",year:"numeric"})}function u(e){let{conversation:t}=e,n=(0,l.useMemo)(()=>{if(t.modifyTime||t.createTime)return c(t.modifyTime||t.createTime)},[t.modifyTime,t.createTime]);return n?(0,r.jsx)("span",{className:(0,a.cn)("text-secondary text-sm"),children:n}):null}},51867:function(e,t,n){n.d(t,{$7:function(){return o},S3:function(){return s},i4:function(){return a}});var r=n(48454),i=n(54162);async function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.xU;return await n.chatGetArtifactById({artifactId:e,body:{conversationId:t}})}async function a(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.xU;try{if((await o.chatUpdateArtifact({artifactId:e,body:{artifactVersionId:t,fullArtifact:n}})).artifactVersionId)return!0}catch(e){return i.Tb(e,{tags:{loc:"artifact-saveArtifactVersion"}}),!1}}async function s(e){let{artifactId:t,artifactVersionId:n,isInline:o}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.xU;try{if((await a.chatUpdateArtifactInlineStatus({artifactId:t,body:{artifactVersionId:n,inlineStatus:o?"SHOW_INLINE_ARTIFACT_INLINE_STATUS":"SHOW_SIDEBAR_ARTIFACT_INLINE_STATUS"}})).artifactVersionId)return!0}catch(e){return i.Tb(e,{tags:{loc:"artifact-setArtifactInline"}}),!1}}},96740:function(e,t,n){n.d(t,{z:function(){return o}});var r=n(48600),i=n(48454);async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.xU,n=arguments.length>2?arguments[2]:void 0,o=await t.chatGetShareLink({shareLinkId:e},{headers:n});if(!o.conversation)throw Error("Conversation not found.");if(!o.responses||0===o.responses.length)throw Error("No responses in conversation.");let a={...o.conversation,personaId:(0,r.BV)(o.conversation.systemPromptName)};return{responses:o.responses.map(e=>({...e,conversationId:a.conversationId,state:"closed"})),conversation:a}}},27399:function(e,t,n){n.d(t,{N:function(){return c},dV:function(){return l},nf:function(){return s}});var r=n(81858),i=n.n(r),o=n(13573),a=n(60542);let s=(0,o.U)(e=>({mode:"code",setMode:t=>e({mode:t}),artifactsByConversationId:{},isRefreshing:!1,refresh:()=>{e({isRefreshing:!0}),setTimeout(()=>e({isRefreshing:!1}),100)},upsertArtifact:(t,n)=>{t.id&&t.timestamp&&e(e=>{var r,o,a;return{artifactsByConversationId:{...e.artifactsByConversationId,[n]:{...null!==(o=e.artifactsByConversationId[n])&&void 0!==o?o:{},[t.id]:i().orderBy(i().uniqBy([t,...null!==(a=null===(r=e.artifactsByConversationId[n])||void 0===r?void 0:r[t.id])&&void 0!==a?a:[]],"identifier"),"timestamp","asc")}}}})}})),l=(0,o.U)()((0,a.tJ)(e=>({inlineSettings:{},setInlineSetting:(t,n)=>{e(e=>({inlineSettings:{...e.inlineSettings,[t]:{updateTime:Date.now(),isInline:n}}}))}}),{name:"inline-artifacts"})),c=(0,o.U)()((0,a.tJ)(e=>({edits:{},saveEdit:(t,n,r)=>{e(e=>{var i,o,a,s;let l=null!==(a=null===(o=e.edits[t])||void 0===o?void 0:null===(i=o[n])||void 0===i?void 0:i.lastSyncTime)&&void 0!==a?a:0,c={editTime:Date.now(),lastSyncTime:l,content:r};return{edits:{...e.edits,[t]:{...null!==(s=e.edits[t])&&void 0!==s?s:{},[n]:c}}}})},updateLastSyncTime:(t,n)=>{e(e=>{var r,i;let o=null===(r=e.edits[t])||void 0===r?void 0:r[n];if(!o)return{};let a={...o,lastSynctime:Date.now()};return{edits:{...e.edits,[t]:{...null!==(i=e.edits[t])&&void 0!==i?i:{},[n]:a}}}})}}),{name:"artifacts-edits"}))}}]);