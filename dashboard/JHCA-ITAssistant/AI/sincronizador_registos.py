# AI/sincronizador_registos.py - Sincroniza ficheiros JSON para a base de dados de mÃ³dulosimport osimport jsonimport syssys.path.append(r"C:\Users\anjos\OneDrive\Desktop\JHCA TIA VIII\AI")from registry import anunciar_moduloCAMINHO_PESQUISA = "modules"  # Pasta onde procurar ficheiros de registo JSONdef sincronizar_json_para_db():    encontrados = 0    for pasta_raiz, _, ficheiros in os.walk(CAMINHO_PESQUISA):        for nome_ficheiro in ficheiros:            if nome_ficheiro.endswith("_registo.json"):                caminho_total = os.path.join(pasta_raiz, nome_ficheiro)                try:                    with open(caminho_total, "r", encoding="utf-8") as f:                        dados = json.load(f)                    anunciar_modulo(**dados)                    encontrados += 1                except Exception as e:                    print(f"[ERRO] Falha ao processar {nome_ficheiro}: {e}")    print(f"[SYNC] {encontrados} ficheiro(s) de registo sincronizados com sucesso.")if __name__ == "__main__":    sincronizar_json_para_db()