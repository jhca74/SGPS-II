import sqlite3import osfrom datetime import datetimeclass DatabaseManager:    def __init__(self, db_path="logs/memoria_sara.db"):        self.db_path = db_path        self._init_db()    def _init_db(self):        os.makedirs(os.path.dirname(self.db_path), exist_ok=True)        with sqlite3.connect(self.db_path) as conn:            c = conn.cursor()            c.execute("""                CREATE TABLE IF NOT EXISTS historico (                    id INTEGER PRIMARY KEY AUTOINCREMENT,                    data TEXT,                    origem TEXT,                    tipo TEXT,                    pergunta TEXT,                    resposta TEXT                )            """)            conn.commit()    def log_interacao(self, origem, tipo, pergunta, resposta):        with sqlite3.connect(self.db_path) as conn:            c = conn.cursor()            c.execute(                "INSERT INTO historico (data, origem, tipo, pergunta, resposta) VALUES (?, ?, ?, ?, ?)",                (datetime.now().strftime("%Y-%m-%d %H:%M:%S"), origem, tipo, pergunta, resposta)            )            conn.commit()    def get_historico(self, tipo_filtro="todos", limit=100):        with sqlite3.connect(self.db_path) as conn:            c = conn.cursor()            if tipo_filtro == "todos":                c.execute("SELECT data, origem, tipo, pergunta, resposta FROM historico ORDER BY id DESC LIMIT ?", (limit,))            else:                c.execute(                    "SELECT data, origem, tipo, pergunta, resposta FROM historico WHERE tipo = ? ORDER BY id DESC LIMIT ?",                    (tipo_filtro, limit)                )            return c.fetchall()        