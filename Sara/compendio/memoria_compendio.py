import chromadbfrom chromadb.utils.embedding_functions import SentenceTransformerEmbeddingFunctionfrom uuid import uuid4# Inicializa ChromaDB localchroma_client = chromadb.Client()embedding_func = SentenceTransformerEmbeddingFunction(model_name="all-MiniLM-L6-v2")colecao = chroma_client.get_or_create_collection(name="sara_memoria", embedding_function=embedding_func)# Adiciona nova entrada ao compÃªndiodef adicionar_entrada(texto: str, metadados: dict = None) -> str:    id_entrada = str(uuid4())    colecao.add(documents=[texto], ids=[id_entrada], metadatas=[metadados or {}])    return id_entrada# Pesquisa combinada por dÃºvida e finalidadedef procurar_com_duvida_e_finalidade(duvida: str, finalidade: str, top_k: int = 3):    consulta = f"{duvida}. Finalidade: {finalidade}"    resultado = colecao.query(query_texts=[consulta], n_results=top_k)    documentos = resultado.get("documents", [[]])[0]    metadados = resultado.get("metadatas", [[]])[0]    return [{"texto": doc, "origem": meta.get("origem", "desconhecido")} for doc, meta in zip(documentos, metadados)]